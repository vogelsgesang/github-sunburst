!function(){"use strict";angular.module("d3charts.sunburst",[]).directive("sunburst",["$parse",function(a){return{restrict:"E",scope:{hierarchy:"=",valueFunction:"=",keyFunction:"="},link:function(b,c,d){function e(){if(k){var a=n.nodes(k),b=q.datum(k).selectAll("path").data(_.filter(a,function(a){return!!a.parent}),l),c=b.enter().append("path");j&&c.on("mouseenter",g),b.style("fill",function(a){return m(a.path)}).style("display",function(a){return a.parent?"block":"none"}).transition().duration(1e3).attrTween("d",f),b.exit().remove()}else q.selectAll("path").remove()}function f(a){var b=this;(void 0===b._x||void 0===b._dx)&&(b._x=a.x,b._dx=0);var c=d3.interpolate({x:b._x,dx:b._dx},a);return function(a){var d=c(a);return b._x=d.x,b._dx=d.dx,o(d)}}function g(a){j(b.$parent,a),b.$parent.$digest()}function h(){j(b.$parent,void 0),b.$parent.$digest()}var i,j;if(d.hasOwnProperty("hoveredElement")&&(i=a(d.hoveredElement),j=i.assign,!j))throw new Error("hoveredElement is un-assignable");var k;b.$watch("hierarchy",function(a){k=_.cloneDeep(a),e()},!0),b.$watch("valueFunction",function(a){n.value(a&&a instanceof Function?a:function(){return 1}),e()});var l;b.$watch("keyFunction",function(a){l=a&&a instanceof Function?a:void 0});var m=d3.scale.category20(),n=d3.layout.partition().sort(null).size([2*Math.PI,1e4]).value(function(){return 1}),o=d3.svg.arc().startAngle(function(a){return a.x}).endAngle(function(a){return a.x+a.dx}).innerRadius(function(a){return Math.sqrt(a.y)}).outerRadius(function(a){return Math.sqrt(a.y+a.dy)}),p=d3.select(c[0]).append("svg").attr("viewBox","-100, -100, 200, 200").attr("preserveAspectRatio","xMinYMin meet"),q=p.append("g");q.append("circle").attr("r",100).classed("backgroundCircle",!0),j&&(q.on("mouseleave",h),p.on("mouseleave",h))}}}])}();
//# sourceMappingURL=sunburst.js.map